<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Starter AI - Kom Ig√•ng p√• 2 Minuter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            max-width: 650px;
            width: 100%;
        }

        .logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 20px;
        }

        h1 {
            color: #1a1a2e;
            margin-bottom: 8px;
            text-align: center;
            font-size: 1.8rem;
        }

        .subtitle {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .progress-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
        }

        .progress-step {
            flex: 1;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            transition: background 0.3s;
        }

        .progress-step.active {
            background: #667eea;
        }

        .progress-step.completed {
            background: #22c55e;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .step-number {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-weight: bold;
            margin-right: 10px;
        }

        .step-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1a1a2e;
            display: flex;
            align-items: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            font-size: 0.95rem;
        }

        input, textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: border-color 0.2s;
            font-family: inherit;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .hint {
            font-size: 0.85rem;
            color: #666;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .hint-icon {
            font-size: 0.9rem;
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 30px;
        }

        .btn {
            flex: 1;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #666;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .success {
            text-align: center;
            padding: 20px;
        }

        .success-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .config-preview {
            background: #1a1a2e;
            color: #22c55e;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
            max-height: 250px;
            overflow-y: auto;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 5px solid #e0e0e0;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .api-help {
            background: #fef3c7;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            font-size: 0.9rem;
        }

        .api-help-steps {
            margin-top: 12px;
            padding-left: 20px;
        }

        .api-help-steps li {
            margin-bottom: 8px;
        }

        .faq-item {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .faq-item input {
            background: white;
            margin-bottom: 10px;
        }

        .faq-item textarea {
            background: white;
        }

        .add-faq {
            background: #f0f9ff;
            color: #0369a1;
            padding: 14px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
            font-weight: 500;
            transition: background 0.2s;
        }

        .add-faq:hover {
            background: #e0f2fe;
        }

        .price-info {
            background: #f0fdf4;
            border-radius: 12px;
            padding: 16px;
            margin-top: 16px;
            text-align: center;
        }

        .price-info strong {
            color: #16a34a;
            font-size: 1.2rem;
        }

        @media (max-width: 600px) {
            .container {
                padding: 24px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">ü§ñ</div>
        <h1 id="title">Support Starter AI</h1>
        <p class="subtitle" id="subtitle">Kom ig√•ng p√• 2 minuter - ingen teknisk kunskap kr√§vs</p>

        <div class="progress-bar">
            <div class="progress-step active" data-step="1"></div>
            <div class="progress-step" data-step="2"></div>
            <div class="progress-step" data-step="3"></div>
            <div class="progress-step" data-step="4"></div>
        </div>

        <!-- Step 1: Basic Info -->
        <div class="step active" data-step="1">
            <h2 class="step-title"><span class="step-number">1</span> Om ditt f√∂retag</h2>

            <div class="info-box">
                <div class="info-box-title">üí° Bra att veta</div>
                Du kan √§ndra allt detta senare. Fyll bara i s√• gott du kan nu!
            </div>

            <div class="form-group">
                <label>F√∂retagsnamn *</label>
                <input type="text" id="company_name" placeholder="T.ex. Vallhamragruppen AB">
                <div class="hint"><span class="hint-icon">‚ÑπÔ∏è</span> Det officiella namnet p√• ditt f√∂retag</div>
            </div>

            <div class="form-group">
                <label>Telefonnummer *</label>
                <input type="tel" id="phone" placeholder="T.ex. 0793-006638">
                <div class="hint"><span class="hint-icon">üìû</span> Dit telefonnummer som kunder kan ringa till</div>
            </div>

            <div class="form-group">
                <label>Email *</label>
                <input type="email" id="email" placeholder="T.ex. info@foretaget.se">
                <div class="hint"><span class="hint-icon">üìß</span> Din f√∂retagsemail</div>
            </div>

            <div class="form-group">
                <label>Var finns ni? *</label>
                <input type="text" id="locations" placeholder="T.ex. Stockholm, G√∂teborg, Malm√∂">
                <div class="hint"><span class="hint-icon">üìç</span> Vilka st√§der/omr√•den verkar ni i?</div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="nextStep(1)">
                    N√§sta ‚Üí
                </button>
            </div>
        </div>

        <!-- Step 2: Business Details -->
        <div class="step" data-step="2">
            <h2 class="step-title"><span class="step-number">2</span> √ñppettider & Tj√§nster</h2>

            <div class="form-group">
                <label>√ñppettider *</label>
                <input type="text" id="hours" placeholder="T.ex. M√•n-Fre 08:00-17:00, L√∂r 10:00-14:00">
                <div class="hint"><span class="hint-icon">üïê</span> N√§r har ni √∂ppet? Kunder f√•r detta svar n√§r de fr√•gar</div>
            </div>

            <div class="form-group">
                <label>Vad erbjuder ni? *</label>
                <textarea id="services" placeholder="T.ex. Vi hyr ut l√§genheter och bostadsr√§tter i G√∂teborg med omnejd. Vi erbjuder ocks√• fastighetsf√∂rvaltning."></textarea>
                <div class="hint"><span class="hint-icon">üè¢</span> Kort beskrivning av vad ditt f√∂retag g√∂r</div>
            </div>

            <div class="form-group">
                <label>Vad ska botten s√§ga som h√§lsning?</label>
                <input type="text" id="greeting" placeholder="L√§mna tomt f√∂r automatisk h√§lsning">
                <div class="hint"><span class="hint-icon">üëã</span> Det f√∂rsta kunden hears n√§r de startar chatten</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="prevStep(2)">‚Üê F√∂reg√•ende</button>
                <button class="btn btn-primary" onclick="nextStep(2)">N√§sta ‚Üí</button>
            </div>
        </div>

        <!-- Step 3: FAQ -->
        <div class="step" data-step="3">
            <h2 class="step-title"><span class="step-number">3</span> Vanliga fr√•gor</h2>

            <div class="info-box">
                <div class="info-box-title">üí° Tips</div>
                L√§gg till de vanligaste fr√•gorna dina kunder har. Botten kan svara p√• dessa direkt!
            </div>

            <div id="faq-list">
                <div class="faq-item">
                    <input type="text" placeholder="Fr√•ga" value="Hur g√∂r jag en felanm√§lan?">
                    <textarea placeholder="Svar">Ber√§tta vad som har h√§nt s√• hj√§lper jag dig g√∂ra en felanm√§lan direkt. Vilken typ av problem g√§ller det och var i fastigheten?</textarea>
                </div>
                <div class="faq-item">
                    <input type="text" placeholder="Fr√•ga" value="Vilka √§r dina √∂ppettider?">
                    <textarea placeholder="Svar">Du hittar v√•ra √∂ppettider p√• v√•r hemsida. F√∂r akuta √§renden utanf√∂r kontorstid, ring v√•r jour.</textarea>
                </div>
            </div>

            <div class="add-faq" onclick="addFaq()">+ L√§gg till ny fr√•ga</div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="prevStep(3)">‚Üê F√∂reg√•ende</button>
                <button class="btn btn-primary" onclick="nextStep(3)">N√§sta ‚Üí</button>
            </div>
        </div>

        <!-- Step 4: API Key -->
        <div class="step" data-step="4">
            <h2 class="step-title"><span class="step-number">4</span> Sista steget!</h2>

            <div class="info-box" style="background: #fef3c7; border-left-color: #f59e0b;">
                <div class="info-box-title">üîë API Nyckel</div>
                F√∂r att botten ska fungera beh√∂ver du en API-nyckel fr√•n Anthropic (som g√∂r AI:n).
            </div>

            <div class="form-group">
                <label>Din API Nyckel *</label>
                <input type="password" id="api_key" placeholder="sk-ant-xxxxx...">
                <div class="hint"><span class="hint-icon">üîê</span> B√∂rjar p√• "sk-ant-"</div>
            </div>

            <div class="api-help">
                <strong>‚ùì Har du ingen API-nyckel? S√• h√§r skaffar du en:</strong>
                <ol class="api-help-steps">
                    <li>G√• till <a href="https://console.anthropic.com" target="_blank" style="color: #667eea;">console.anthropic.com</a></li>
                    <li>Klicka "Sign up" (logga in med Google fungerar ocks√•)</li>
                    <li>G√• till "API Keys" i menyn till v√§nster</li>
                    <li>Klicka "+ Create Key"</li>
                    <li>Kopiera koden och klistra in ovan</li>
                </ol>

                <div class="price-info">
                    <strong>üí∞ Kostar ca 50-150 kr/m√•nad</strong><br>
                    <small>Beror p√• hur m√•nga fr√•gor botten f√•r. Du f√•r $5 gratis att testa med!</small>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="prevStep(4)">‚Üê F√∂reg√•ende</button>
                <button class="btn btn-primary" onclick="finishSetup()">üöÄ Skapa min bot!</button>
            </div>
        </div>

        <!-- Loading -->
        <div class="step" data-step="loading">
            <div class="loading">
                <div class="spinner"></div>
                <h2>Skapar din bot...</h2>
                <p id="loading-status">Genererar config...</p>
            </div>
        </div>

        <!-- Success -->
        <div class="step" data-step="success">
            <div class="success">
                <div class="success-icon">üéâ</div>
                <h2>Allt klart!</h2>
                <p style="color: #666; margin-bottom: 20px;">Din bot-config √§r skapad! V√§lj vad du vill g√∂ra:</p>

                <div class="config-preview" id="final-config"></div>

                <div class="button-group" style="flex-direction: column;">
                    <button class="btn btn-primary" onclick="downloadConfig()">üì• Ladda ner config-fil</button>
                    <button class="btn btn-secondary" onclick="copyConfig()">üìã Kopiera config</button>
                    <button class="btn btn-secondary" onclick="emailConfig()">üìß Skicka via email</button>
                </div>

                <div class="info-box" style="margin-top: 20px; background: #f0fdf4; border-left-color: #22c55e;">
                    <div class="info-box-title">‚úÖ N√§sta steg</div>
                    Skicka config-filen till oss s√• s√§tter vi upp din bot inom 24 timmar!
                </div>
            </div>
        </div>
    </div>

    <script>
        const state = {
            currentStep: 1,
            data: {}
        };

        function updateProgress(step) {
            document.querySelectorAll('.progress-step').forEach((el, index) => {
                el.classList.remove('active', 'completed');
                if (index + 1 < step) {
                    el.classList.add('completed');
                } else if (index + 1 === step) {
                    el.classList.add('active');
                }
            });
        }

        function goToStep(step) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            if (typeof step === 'string') {
                document.querySelector(`[data-step="${step}"]`).classList.add('active');
            } else {
                document.querySelector(`[data-step="${step}"]`).classList.add('active');
                updateProgress(step);
            }
            state.currentStep = step;
        }

        function nextStep(current) {
            console.log('nextStep called with:', current);
            if (!validateStep(current)) {
                console.log('Validation failed');
                return;
            }
            collectData(current);
            console.log('Going to step:', current + 1);
            goToStep(current + 1);
        }

        function prevStep(current) {
            goToStep(current - 1);
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    const company = document.getElementById('company_name').value.trim();
                    const phone = document.getElementById('phone').value.trim();
                    const email = document.getElementById('email').value.trim();
                    const locations = document.getElementById('locations').value.trim();

                    if (!company || !phone || !email || !locations) {
                        alert('V√§nligen fyll i alla f√§lt med *');
                        return false;
                    }
                    if (!email.includes('@')) {
                        alert('V√§nligen ange en giltig email');
                        return false;
                    }
                    break;
                case 2:
                    const hours = document.getElementById('hours').value.trim();
                    const services = document.getElementById('services').value.trim();

                    if (!hours || !services) {
                        alert('V√§nligen fyll i alla f√§lt med *');
                        return false;
                    }
                    break;
            }
            return true;
        }

        function collectData(step) {
            switch(step) {
                case 1:
                    state.data.company_name = document.getElementById('company_name').value.trim();
                    state.data.phone = document.getElementById('phone').value.trim();
                    state.data.email = document.getElementById('email').value.trim();
                    state.data.locations = document.getElementById('locations').value.trim();
                    break;
                case 2:
                    state.data.business_hours = document.getElementById('hours').value.trim();
                    state.data.services = document.getElementById('services').value.trim();
                    state.data.greeting = document.getElementById('greeting').value.trim();
                    break;
                case 3:
                    state.data.faq_data = [];
                    document.querySelectorAll('.faq-item').forEach(item => {
                        const q = item.querySelector('input').value.trim();
                        const a = item.querySelector('textarea').value.trim();
                        if (q && a) {
                            state.data.faq_data.push({ question: q, answer: a });
                        }
                    });
                    break;
                case 4:
                    state.data.api_key = document.getElementById('api_key').value.trim();
                    break;
            }
        }

        function addFaq() {
            const container = document.getElementById('faq-list');
            const item = document.createElement('div');
            item.className = 'faq-item';
            item.innerHTML = `
                <input type="text" placeholder="Fr√•ga">
                <textarea placeholder="Svar"></textarea>
            `;
            container.appendChild(item);
        }

        function generateConfig() {
            const tenantId = state.data.company_name
                .toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '-')
                .substring(0, 30);

            const config = {
                company_name: state.data.company_name,
                tenant_id: tenantId,
                phone: state.data.phone,
                contact_email: state.data.email,
                locations: state.data.locations,
                business_hours: state.data.business_hours,
                services: state.data.services,
                greeting_response: state.data.greeting || `Hej! Jag √§r ${state.data.company_name}s digitala kundtj√§nst. Hur kan jag hj√§lpa dig idag?`,
                contact_response: `Du n√•r oss p√• ${state.data.phone} eller ${state.data.email}.`,
                hours_response: state.data.business_hours,
                faq_data: state.data.faq_data || [],
                fault_report_keywords: ["felanm√§lan", "problem", "fel", "trasig", "fungerar inte", "l√§cka"],
                emergency_keywords": ["akut", "brinner", "brand", "gasl√§cka", "√∂versv√§mning", "vattenl√§cka"],
                escalation: {
                    enable_lead_scoring: true,
                    auto_escalate_threshold: 4,
                    lead_threshold: 3
                },
                api_key: state.data.api_key
            };

            return JSON.stringify(config, null, 2);
        }

        function finishSetup() {
            collectData(4);

            if (!state.data.api_key) {
                alert('V√§nligen ange din API-nyckel');
                return;
            }

            goToStep('loading');

            const statuses = [
                'Genererar config...',
                'Validerar uppgifter...',
                'F√∂rbereder fil...'
            ];

            let i = 0;
            const interval = setInterval(() => {
                if (i < statuses.length) {
                    document.getElementById('loading-status').textContent = statuses[i];
                    i++;
                } else {
                    clearInterval(interval);
                    showSuccess();
                }
            }, 600);
        }

        function showSuccess() {
            const config = generateConfig();
            document.getElementById('final-config').textContent = config;
            goToStep('success');
        }

        function downloadConfig() {
            const config = generateConfig();
            const blob = new Blob([config], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const tenantId = state.data.company_name.toLowerCase().replace(/[^a-z0-9]/g, '-').substring(0, 20);
            a.download = `${tenantId}-config.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function copyConfig() {
            const config = generateConfig();
            navigator.clipboard.writeText(config).then(() => {
                alert('Config kopierad! Skicka den till oss s√• s√§tter vi upp din bot.');
            });
        }

        function emailConfig() {
            const config = generateConfig();
            const subject = encodeURIComponent(`Min bot-config: ${state.data.company_name}`);
            const body = encodeURIComponent(`Hej!\n\nH√§r √§r min config f√∂r Support Starter AI.\n\n${config}\n\nV√§nligen,\n${state.data.company_name}`);
            window.location.href = `mailto:din-email@foretaget.se?subject=${subject}&body=${body}`;
        }

        // Auto-format phone number
        document.getElementById('phone')?.addEventListener('input', function() {
            let value = this.value.replace(/\D/g, '');
            if (value.length > 7) {
                value = value.substring(0, 7) + '-' + value.substring(7);
            }
            this.value = value;
        });
    </script>
</body>
</html>
